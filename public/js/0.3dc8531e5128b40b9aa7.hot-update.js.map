{"version":3,"sources":["webpack:///./src/routes.js?7aab","webpack:///./src/components/newGame.js?2291"],"names":["Routes","NewGame","usersQuery","fetchUsers","createGame","props","context","startGame","state","selectedOpponent","alert","user","then","router","push","res","payload","data","id","catch","console","log","err","handleClear","e","setState","name","handleSelect","JSON","parse","target","dataset","nickname","selected","handleChange","__timer","value","clearTimeout","setTimeout","listFoundUsers","display","length","users","i","call","contextTypes","PropTypes","object","isRequired"],"mappings":"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","file":"0.3dc8531e5128b40b9aa7.hot-update.js","sourcesContent":["import React from \"react\";\nimport { Route, IndexRoute } from \"react-router\";\nimport GameContainer from \"./components/gameContainer\";\nimport NewGame from \"./components/newGame\";\nimport Main from \"./components/main\";\nimport Games from \"./components/games\";\n\nconst Routes = (<Route path=\"/\" component={Main}>\n    <IndexRoute component={Games} />\n    <Route path=\"games/new\" component={NewGame}/>\n    <Route path=\"games/:id\" component={GameContainer}/>\n  </Route>);\n\nexport default Routes;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/routes.js\n **/","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { fetchUsers, createGame } from \"../actions/gameActions\";\n\n@connect(\n  ({ usersQuery }) => ({ usersQuery }),\n  { fetchUsers, createGame }\n)\nexport default class NewGame extends Component {\n  constructor(props, context) {\n    super(props);\n    this.state = {\n      name: \"\",\n      selectedOpponent: null,\n      selected: false\n    };\n  }\n  static contextTypes = {\n    router: React.PropTypes.object.isRequired\n  }\n\n  startGame = () => {\n    if (!this.state.selectedOpponent) {\n      alert(\"You have to select a player first!\");\n    } else {\n      this.props.createGame(this.props.user,\n        this.state.selectedOpponent)\n        .then(res => {\n          this.context.router.push(`/games/${res.payload.data.id}`)\n        }).catch(err => {\n          console.log(err)\n        });\n    }\n  }\n  handleClear = (e) => {\n    this.setState({\n      name: \"\",\n      selectedOpponent: null\n    });\n  }\n  handleSelect = (e) => {\n    let user = JSON.parse(e.target.dataset.user);\n    this.setState({\n      name: user.nickname,\n      selectedOpponent: user,\n      selected: true\n    });\n  }\n  handleChange = (e) => {\n    let __timer;\n    this.setState({\n      name: e.target.value,\n      selected: false\n    });\n    clearTimeout(__timer);\n    __timer = setTimeout(() => {\n      this.props.fetchUsers(this.state.name);\n    }, 700);\n  }\n  listFoundUsers = () => {\n    return (<ul\n      onClick={this.handleSelect}\n      style={{\n       display: this.props.usersQuery.length && !this.state.selected ? \"block\" : \"none\"\n      }}\n    >\n      {\n        function() {\n          let users = [],\n            usersQuery = this.props.usersQuery;\n          for (let i = 0; i < usersQuery.length; i++) {\n            let user = usersQuery[i];\n            if (user.id !== 1 && user.id !== this.props.user.id) {\n              users.push(<li data-user={JSON.stringify(user)} key={user.id}>{ user.nickname }</li>);\n            }\n          }\n          return users;\n        }.call(this)\n      }\n    </ul>);\n  }\n  render(){\n    return (<div className=\"new-game-container\">\n      <h1>New Game</h1>\n      <div>\n        <div className=\"user-input\">\n          <input type=\"text\"\n                 placeholder=\"Enter the user name\"\n                 onChange={this.handleChange}\n                 value={this.state.name}\n                 />\n          <div onClick={this.handleClear}>&times;</div>\n       </div>\n       { this.listFoundUsers() }\n      </div>\n\n      <input type=\"submit\"\n             value=\"Start Game\"\n             onClick={this.startGame}\n             disabled={!this.state.selectedOpponent}/>\n    </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/newGame.js\n **/"],"sourceRoot":""}